(function(o){"use strict";class h{constructor(e,t){this.cursorPosition=0,this.path=[],this.code=e,this.options={specifyStringIndex:!1,...t}}get(e,t){if(this.cursorPosition=e,this.path=[],!this.parseValue(0).found)return null;const r=[...this.path];return this.cursorPosition=0,this.path=[],t?r:this.rawPathToString(r)}rawPathToString(e){let t="$";for(const s of e)(s.type==="array"||s.type==="string")&&(t+=`[${s.index}]`),s.type==="object"&&(/[^\w]/.test(s.key)||s.key===""?t+=`["${s.key}"]`:t+=`.${s.key}`);return t}parseArray(e,t=0){if(t===0){const r=this.parseUntilToken(e+1,'{["0123456789tf]'.split(""));if(this.code[r]==="]")return{endIndex:r,found:this.cursorWithin(e,r)}}this.path.push({type:"array",index:t});const s=this.parseValue(e+1);return s.found||(this.path.pop(),this.code[s.endIndex]==="]")?s:this.parseArray(s.endIndex+1,t+1)}parseObject(e){const t=this.parseObjectKey(e);if(typeof t.key>"u"||(this.path.push({type:"object",key:t.key}),t.found))return t;const s=this.parseValue(t.endIndex+1);return s.found||(this.path.pop(),this.code[s.endIndex]==="}")?s:this.parseObject(s.endIndex+1)}parseObjectKey(e){const t=this.parseUntilToken(e,['"',"}"]);if(this.code[t]==="}")return{endIndex:t,found:this.cursorWithin(e,t)};const s=this.parseUntilToken(t+1,'"',!0),r=this.code.slice(t+1,s),i=this.parseUntilToken(s,":");return{key:r,endIndex:i,found:this.cursorWithin(t,i)}}parseValue(e){const t=this.parseUntilToken(e,'{["0123456789tfn'.split("")),s=this.code[t];let r;if(s==="{"){const n=this.parseObject(t);if(r=n.endIndex,n.found)return n}else if(s==="["){const n=this.parseArray(t);if(r=n.endIndex,n.found)return n}else if(s==='"'){const n=this.parseString(t);if(r=n.endIndex,n.found)return n}else["t","f","n"].includes(s)?r=this.parseAnyLitteral(t):r=this.parseUntilToken(t+1,[",","}","]"," ",`
`])-1;const i=this.parseUntilToken(r+1,[",","}","]"]);return{found:this.cursorWithin(e,r),endIndex:i}}parseString(e){const t=this.parseUntilToken(e+1,'"',!0);if(this.options.specifyStringIndex&&this.cursorWithin(e,t)){if(t-e>1){let s=this.cursorPosition-e-1;s=Math.min(s,t-e-2),s=Math.max(0,s),this.path.push({type:"string",index:s})}return{found:!0,endIndex:t}}return{found:this.cursorWithin(e,t),endIndex:t}}parseAnyLitteral(e){for(;++e<this.code.length;){const t=this.code[e];if(!/[a-zA-Z]/.test(t))return e-1}return e}parseUntilToken(e,t,s=!0){const r=Array.isArray(t)?t:[t];for(;e<this.code.length&&e>=0;){if(r.includes(this.code[e])){if(!s)return e;let i=0;for(;this.code[e-1-i]==="\\";)i+=1;if(i%2===0)return e}e+=1}return e}cursorWithin(e,t){return e<=this.cursorPosition&&this.cursorPosition<=t}}o.JsonCursorPath=h})(this.window=this.window||{});
