(function(c){"use strict";class a{constructor(e,t){this.__cursorPosition=0,this.code=e,this.options={...t}}get(e,t){this.__cursorPosition=e;const s=this.parseUntilToken(0,'{["'.split("")),r=this.code[s];let n;r==="{"?n=this.parseObject(s+1,[]):r==="["&&(n=this.parseArray(s+1,[]));let i=n?.path?n.path:[];return t?i:this.rawPathToString(i)}rawPathToString(e){let t="$";for(const s of e)(s.type==="array"||s.type==="string")&&(t+=`[${s.index}]`),s.type==="object"&&(/[^\w]/.test(s.key)?t+=`["${s.key.replace(/"/g,'\\"')}"]`:t+=`.${s.key}`);return t}parseArray(e,t,s=0){if(s===0){const n=this.parseUntilToken(e+1,'{["0123456789tf]'.split(""));if(this.code[n]==="]")return{endIndex:n,found:this.cursorWithin(e,n)}}const r=this.parseValue(e+1,t,{type:"array",index:s});return r.found||this.code[r.endIndex]==="]"?r:this.parseArray(r.endIndex+1,t,s+1)}parseObject(e,t){const s=this.parseObjectKey(e);if(s.found||!s.key)return s;const r=this.parseValue(s.endIndex+1,t,{type:"object",key:s.key});return r.found||this.code[r.endIndex]==="}"?r:this.parseObject(r.endIndex+1,t)}parseObjectKey(e){const t=this.parseUntilToken(e,['"',"}"]);if(this.code[t]==="}")return{endIndex:t,found:this.cursorWithin(e,t)};const s=this.parseUntilToken(t+1,'"',!0),r=this.code.slice(t+1,s),n=this.parseUntilToken(s,":");return{key:r,endIndex:n,found:this.cursorWithin(t,n)}}parseValue(e,t,s){const r=this.parseUntilToken(e,'{["0123456789tfn'.split("")),n=this.code[r];let i;if(n==="{"){const o=this.parseObject(r,[...t,s]);if(i=o.endIndex,o.found)return o}else if(n==="["){const o=this.parseArray(r,[...t,s]);if(i=o.endIndex,o.found)return o}else n==='"'?i=this.parseUntilToken(r+1,'"',!0):["t","f","n"].includes(n)?i=this.parseAnyLitteral(r):i=this.parseUntilToken(r+1,[",","}","]"," ",`
`])-1;const u=this.parseUntilToken(i+1,[",","}","]"]),h=this.cursorWithin(e,i);return{found:h,path:h?[...t,s]:void 0,endIndex:u}}parseAnyLitteral(e){for(;++e<this.code.length;){const t=this.code[e];if(!/[a-zA-Z]/.test(t))return e-1}return e}parseUntilToken(e,t,s=!0,r=1){const n=Array.isArray(t)?t:[t];for(;e<this.code.length&&e>=0;){if(n.includes(this.code[e])&&(!s||this.code[e-1]!=="\\"))return e;e+=r}return e}cursorWithin(e,t){return e<=this.__cursorPosition&&this.__cursorPosition<=t}}c.JsonCursorPath=a})(this.window=this.window||{});
